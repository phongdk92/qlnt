
{% block content %}

{% if message != None %}
{{message}}
{% endif %}
<script>
    $(document).ready(function(){
        $("select[name=term]").change(function(){
            if ($(this).val != -1){
                var d = $(this).parents("form").serialize();
                var arg = {data: d,
                    type: $(this).parents("form").attr('method'),
                    url: $(this).parents("form").attr('action'),
                    success: function(response) {
                        $('.ui-tabs-panel:visible').html(response);
                    },
                    global:false
                };
                $.ajax(arg);
            }
        });
    });
</script>




        <form action="/school/markForAStudent/{{class_id}}/{{student_id}}"  name="info" method="post" id='myform' > {% csrf_token %}
			Học kỳ 
            <select name="term" onclick="submitTerm();" >
                {% for term in termList %}
                        <option   value={{ term.id }} selected> {{ term}} </option>
                {% endfor %}

            </select>
        </form>
		<br>
		<br>
		<table border=1 width="50%" class="styleA" >
			<tr>
				<th rowspan =2 align="center" width= "10%">
					Học kỳ
				</th>
				<th colspan =2 align="center" width= "20%" >
					Kết quả xết loại
				</th>
				{% ifequal selectedTerm.number 2 %}
				<th colspan =2 align="center" width= "20%">
					Xếp loại lại sau KT lại môn học hoặc rèn luyện thêm về học lực
				</th>
				{% endifequal %}
				
			</tr>
			<tr>
				<th align="center" width= "10%">
					TB
				</th>
				<th align="center" width= "10%">
					HL
				</th>

				{% ifequal selectedTerm.number 2 %}
				<th align="center" width= "10%">
					TB
				</th>
				<th align="center" width= "10%">
					HL
				</th>
				{% endifequal %}						
			</tr>
			<tr>
				<td align="center" >
				 Học Kỳ I
				</td>
				<td align="center">
					{% if tbhk1.tb_hk != None %}
						{{tbhk1.tb_hk}}
					{% else %}
						&nbsp
					{% endif %}	
					
				</td>
				<td align="center">
				{% ifequal tbhk1.hl_hk "G" %}					
					Giỏi
				{% else %}	
				{% ifequal tbhk1.hl_hk "K" %}					
					Khá
				{% else %}	
				{% ifequal tbhk1.hl_hk "TB" %}					
					Trung bình
				{% else %}	
				{% ifequal tbhk1.hl_hk "Y" %}					
					Yếu
				{% else %}	
				{% ifequal tbhk1.hl_hk "Kem" %}					
					Kém
				{% else %}
					&nbsp
				{% endifequal %}	
				{% endifequal %}	
				{% endifequal %}	
				{% endifequal %}	
				{% endifequal %}	
			
			</td>
			{% ifequal selectedTerm.number 2  %}
				<td>
				</td>
				<td>
				</td>
			{% endifequal %}	
			</tr>
			{% ifequal selectedTerm.number 2  %}
			<tr>
				<td align="center" >
				 Học Kỳ II
				</td>
				<td align="center">

					{% if tbhk2.tb_hk != None %}
						{{tbhk2.tb_hk}}
					{% else %}
						&nbsp
					{% endif %}	
				</td>
				<td align="center">
				{% ifequal tbhk2.hl_hk "G" %}					
					Giỏi
				{% else %}	
				{% ifequal tbhk2.hl_hk "K" %}					
					Khá
				{% else %}	
				{% ifequal tbhk2.hl_hk "TB" %}					
					Trung bình
				{% else %}	
				{% ifequal tbhk2.hl_hk "Y" %}					
					Yếu
				{% else %}	
				{% ifequal tbhk2.hl_hk "Kem" %}					
					Kém
				{% else %}
					&nbsp
				{% endifequal %}	
				{% endifequal %}	
				{% endifequal %}	
				{% endifequal %}	
				{% endifequal %}	
				</td>
				<td>
				</td>
				<td>
				</td>

			</tr>	
			
			<tr>
				<td align="center" >
				 Cả năm
				</td>
				<td align="center">
					
					{% if tbCaNam.tb_nam != None %}
						{{tbCaNam.tb_nam}}
					{% else %}
						&nbsp
					{% endif %}	
				</td>
				<td align="center">
				{% ifequal tbCaNam.hl_nam "G" %}					
					Giỏi
				{% else %}	
				{% ifequal tbCaNam.hl_nam "K" %}					
					Khá
				{% else %}	
				{% ifequal tbCaNam.hl_nam "TB" %}					
					Trung bình
				{% else %}	
				{% ifequal tbCaNam.hl_nam "Y" %}					
					Yếu
				{% else %}	
				{% ifequal tbCaNam.hl_nam "Kem" %}					
					Kém
				{% else %}
					&nbsp
				{% endifequal %}	
				{% endifequal %}	
				{% endifequal %}	
				{% endifequal %}	
				{% endifequal %}	
				</td>
				<td>
				</td>
				<td>
				</td>

			</tr>	
			{% endifequal %}
		
		</table>
		<br>
		
<script type="text/javascript" >
	document.info.term.value={{termChoice}}
	
</script>		
		
	
	<table border =1 width = "100%" class="styleA">
		<tr>
			<th rowspan=2 align="center" width="4%">
				Stt
			</th>	
			<th rowspan=2 align="center" width="18%">
			   Môn
			</th>	
			<th colspan=5 align="center" width="20%" >
				Miệng
			</th>	

			<th colspan=5 align="center" width="20%">
				15 phút
			</th>	
			<th colspan=5 align="center" width="20%">
				45 phút
			</th>
			<th rowspan=2 align="center" width="5%">
				Thi cuối kì
			</th>	
		{% ifequal selectedTerm.number 1 %}
			<th rowspan=2 width="5%" >
				TB
			</th>	
		{% else %}
			<th colspan=3 align="center"  >
				<b>ĐIỂM TRUNG BÌNH </b>
			</th>
		{% endifequal %}
			
			
		</tr>
		<tr>
		<th width ="4%" align="center" > 1</th>
		<th width ="4%" align="center"> 2</th>
		<th width ="4%" align="center"> 3</th>
		<th width ="4%" align="center"> 4</th>
		<th width ="4%" align="center"> 5</th>
		<th width ="4%" align="center" > 1</th>
		<th width ="4%" align="center"> 2</th>
		<th width ="4%" align="center"> 3</th>
		<th width ="4%" align="center"> 4</th>
		<th width ="4%" align="center"> 5</th>
		<th width ="4%" align="center" > 1</th>
		<th width ="4%" align="center"> 2</th>
		<th width ="4%" align="center"> 3</th>
		<th width ="4%" align="center"> 4</th>
		<th width ="4%" align="center"> 5</th>
		{% ifequal selectedTerm.number 2 %}
			<th align="center" >HK I  </th>
			<th align="center" >HK II </th>
			<th align="center" > CK </th>
			
		{% endifequal %}
		
		</tr>
		
		
	{% ifequal selectedTerm.number 1 %} 
		{% for s,m in list %}	
		<tr>
			<td align="center">
			 {{forloop.counter}}	
			</td>
			<td align="center">
				{{s}}
			</td>

			{% ifnotequal s.hs 	0 %}

			<td align="center">
				{{m.mieng_1|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mieng_2|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mieng_3|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mieng_4|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mieng_5|floatformat:"-1"}}  
			</td>

			<td align="center">
				{{m.mlam_1|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mlam_2|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mlam_3|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mlam_4|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mlam_5|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_1|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_2|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_3|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_4|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_5|floatformat:"-1"}}  
			</td>

			<td align="center">
				{{m.ck|floatformat:"-1"}}  
			</td>

			<td align="center">
				{{m.tb|floatformat:"-1"}}  
			</td>
		</tr>		
		{% else %}
			<td colspan=5 align="center">
			{% ifequal m.mieng_1 9 %}
				G
			{% else %}	
			{% ifequal m.mieng_1 7 %}
				K
			{% else %}	
			{% ifequal m.mieng_1 6 %}
				TB
			{% else %}	
			{% ifequal m.mieng_1 4 %}
				Y
			{% else %}	
			{% ifequal m.mieng_1 1 %}
				Kém
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			
			</td>
			<td colspan=5>
			</td>
			<td colspan=5 align="center">
			{% ifequal m.mot_tiet_1 9 %}
				G
			{% else %}	
			{% ifequal m.mot_tiet_1 7 %}
				K
			{% else %}	
			{% ifequal m.mot_tiet_1 6 %}
				TB
			{% else %}	
			{% ifequal m.mot_tiet_1 4 %}
				Y
			{% else %}	
			{% ifequal m.mot_tiet_1 1 %}
				Kém
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			</td>
			<td  align="center">
			{% ifequal m.ck 9 %}
				G
			{% else %}	
			{% ifequal m.ck 7 %}
				K
			{% else %}	
			{% ifequal m.ck 6 %}
				TB
			{% else %}	
			{% ifequal m.ck 4 %}
				Y
			{% else %}	
			{% ifequal m.ck 1 %}
				Kém
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			
			</td>
			<td align="center">
			{% ifequal m.tb 9 %}
				G
			{% else %}	
			{% ifequal m.tb 7 %}
				K
			{% else %}	
			{% ifequal m.tb 6 %}
				TB
			{% else %}	
			{% ifequal m.tb 4 %}
				Y
			{% else %}	
			{% ifequal m.tb 1 %}
				Kém
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			
			</td>

		{% endifnotequal %}
			
		{% endfor %}
		
		{%else %}
		{% for s,m,hk1,tbnam in list %}		
		<tr>
			<td align="center">
			 {{forloop.counter}}	
			</td>
			<td align="center">
				{{s}}
			</td>

		{% ifnotequal s.hs 	0 %}

			<td align="center">
				{{m.mieng_1|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mieng_2|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mieng_3|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mieng_4|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mieng_5|floatformat:"-1"}}  
			</td>

			<td align="center">
				{{m.mlam_1|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mlam_2|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mlam_3|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mlam_4|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mlam_5|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_1|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_2|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_3|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_4|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_5|floatformat:"-1"}}  
			</td>

			<td align="center">
				{{m.ck|floatformat:"-1"}}  
			</td>

			<td align="center">
				{{hk1|floatformat:"-1"}}  
			</td>			
			<td align="center">
				{{m.tb|floatformat:"-1"}}  
			</td>			
			<td align="center">
				{{tbnam|floatformat:"-1"}}  
			</td>	
		{%else %}
			<td colspan=5 align="center">
			{% ifequal m.mieng_1 9 %}
				G
			{% else %}	
			{% ifequal m.mieng_1 7 %}
				K
			{% else %}	
			{% ifequal m.mieng_1 6 %}
				TB
			{% else %}	
			{% ifequal m.mieng_1 4 %}
				Y
			{% else %}	
			{% ifequal m.mieng_1 1 %}
				Kém
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			
			</td>
			<td colspan=5>
			</td>
			<td colspan=5 align="center">
			{% ifequal m.mot_tiet_1 9 %}
				G
			{% else %}	
			{% ifequal m.mot_tiet_1 7 %}
				K
			{% else %}	
			{% ifequal m.mot_tiet_1 6 %}
				TB
			{% else %}	
			{% ifequal m.mot_tiet_1 4 %}
				Y
			{% else %}	
			{% ifequal m.mot_tiet_1 1 %}
				Kém
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			</td>
			<td  align="center">
			{% ifequal m.ck 9 %}
				G
			{% else %}	
			{% ifequal m.ck 7 %}
				K
			{% else %}	
			{% ifequal m.ck 6 %}
				TB
			{% else %}	
			{% ifequal m.ck 4 %}
				Y
			{% else %}	
			{% ifequal m.ck 1 %}
				Kém
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			
			</td>
			<td align="center">
			{% ifequal hk1 9 %}
				G
			{% else %}	
			{% ifequal hk1 7 %}
				K
			{% else %}	
			{% ifequal hk1 6 %}
				TB
			{% else %}	
			{% ifequal hk1 4 %}
				Y
			{% else %}	
			{% ifequal hk1 1 %}
				Kém
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			
			</td>

			<td align="center">
			{% ifequal m.tb 9 %}
				G
			{% else %}	
			{% ifequal m.tb 7 %}
				K
			{% else %}	
			{% ifequal m.tb 6 %}
				TB
			{% else %}	
			{% ifequal m.tb 4 %}
				Y
			{% else %}	
			{% ifequal m.tb 1 %}
				Kém
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			
			</td>

			<td align="center">
			{% ifequal tbnam 9 %}
				G
			{% else %}	
			{% ifequal tbnam 7 %}
				K
			{% else %}	
			{% ifequal tbnam 6 %}
				TB
			{% else %}	
			{% ifequal tbnam 4 %}
				Y
			{% else %}	
			{% ifequal tbnam 1 %}
				Kém
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			{% endifequal %}	
			
			</td>

		
		
		{% endifnotequal %}	
		</tr>	
			
		 {%endfor %}
	{% endifequal %}

	</table>
{% endblock %}

