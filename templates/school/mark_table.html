<!DOCTYPE HTML>
{% extends "school/base_school.html"%}
{% block content %}
{% if message != None %}
{{message}}
{% endif %}

<script type="text/javascript" >
//lock enter
function catchEnter(e)

{
      if (!e) e = window.event; 
      var code = (e.keyCode) ? e.keyCode : e.which;

	if (code == 13 || code == 3) 
	{
		return false;
	}	
	else return true;
}
window.onload = function() { document.onkeypress = catchEnter; };
   

	function acceptDigits(tb){
		var exp = /[^((\d).,)]/g;
		var exp1=/[,]/g
		tb.value = tb.value.replace(exp,'');
		var value=tb.value;
		value=value.replace(exp1,'.');		
		//kiem tra xem no co nhieu hon hai dau cham hay ko
		var countDot=0;
		for(i=0;i<value.length;i++)
			if (value.charAt(i)==".") 
				countDot++;
				
		if (countDot>1)
		{		
			tb.value="";
			return;
		}			
		var number=parseFloat(value);
		//alert(number);		
		if (number>10 )
			tb.value="";
	}
	function controlDirection(tb,event)
	{
		var keycode=event.keyCode;
		var name=tb.name;
		var nameNumber=parseInt(name);
		if ((keycode==40) ||(keycode==13))
		{
			var temp=nameNumber+100;
			var tempName=temp.toString();
			var cel=document.getElementsByName(tempName);
			if (cel[0])
				{
					cel[0].focus();
				}				
		}
		else
		if (keycode==38)
		{
			var temp=nameNumber-100;
			var tempName=temp.toString();
			var cel=document.getElementsByName(tempName);
			if (cel[0])
				{
					cel[0].focus();
				}
		}
		else
		if (keycode==37)
		{
			var temp=nameNumber-1;
			var tempName=temp.toString();
			var cel=document.getElementsByName(tempName);
			if (cel[0])
				{
					cel[0].focus();
				}
		}
		else
		if (keycode==39)
		{
			var temp=nameNumber+1;
			var tempName=temp.toString();
			var cel=document.getElementsByName(tempName);
			if (cel[0])
				{
					cel[0].focus();
				}
		}					
	}
	function submitTerm()
	{
		if (document.info.term.value!=-1)
			if (document.info.term.value!={{termChoice}})
			if (document.info.subject.value!=-1)
			{
				document.info.submitChoice.value="hienthi";
				document.info.submit();
			}	
	}

	function submitSubject()
	{
		if (document.info.subject.value!=-1)
			if (document.info.subject.value!={{subjectChoice}})
			if (document.info.term.value!=-1)
			{	
				document.info.submitChoice.value="hienthi";
				document.info.submit();
			}	
	}
	function saveMark()
	{
		document.info.submitChoice.value="luulai";
		if (document.info.term.value!=-1)
			document.info.submit();
	}
	
</script>

<table border="1" width=100% >
<form action="/school/mark_table"  name="info" method="post" id='myform' 
	onsubmit="return false" >{% csrf_token %}
	<input type="hidden" name="submitChoice" value="">	

	<tr>
		<td align="center" colspan =4 style="font-size:25px" >
			<b>Bảng điểm </b>
		</td>
	</tr>
	<tr>
	<td>&nbsp</td>
	</tr>
	
	
	<tr>								
		<td width ="50%"> Môn học:
		
		<select name="subject"  onclick="submitSubject();">
	       	<option value=-1 selected >chọn môn</option>		
			{% for subject in subjectList %}
				<option  value={{subject.id }}> {{ subject.name}}</option>		
			{% endfor %}		
		</select>
		</td >
		
		<td width ="50%"> Học kỳ &nbsp&nbsp:  
		<select name="term" onclick="submitTerm();" >				
			<option value=-1 > Chọn kỳ </option>
			{% for term in termList %}
				{% ifequal term.year_id.time.year currentTerm.year_id.time.year %}				
					<option   value={{ term.id }} selected> {{ term}} </option>	
				{% else %}	
					<option   value={{ term.id }}> {{ term}}</option>		
				{% endifequal %}	
			{% endfor %}	
			
		</select>
		</td>					
	</tr>
	
<script type="text/javascript" >
	document.info.term.value={{termChoice}}
	document.info.subject.value={{subjectChoice}};
	
</script>		
		
	<tr><td>&nbsp </td>	</tr>
	<tr> 
	<td colspan=4 align="right">    
	</td>
	</tr>
	<tr>
	<td colspan =4>
	<div id="markTable" >	
	
	{% ifnotequal subjectChoice -1  %} 	
	{% ifnotequal termChoice -1  %} 	
	<table border =1 width = "100%" >
		<tr>
			<td rowspan=2 align="center" width="4%">
				Stt
			</td>	
			<td rowspan=2 align="center" width="18%">
				Họ và tên
			</td>	
			<td rowspan=2 align="center" width="10%">			
				Ngày sinh
			</td>	
			<td colspan=5 align="center" width="20%" >
				Miệng
			</td>	

			<td colspan=5 align="center" width="20%">
				15 phút
			</td>	
			<td colspan=5 align="center" width="20%">
				45 phút
			</td>
			<td rowspan=2 align="center" width="5%">
				Thi cuối kì
			</td>	
		{% ifequal selectedTerm.number 1 %}
			<td rowspan=2 width="5%" >
				TB
			</td>	
		{% else %}
			<td colspan=3 align="center" width="15%" >
				<b>ĐIỂM TRUNG BÌNH </b>
			</td>
		{% endifequal %}
			
			
		</tr>
		<tr>
		<td width ="4%" align="center" > 1</td>
		<td width ="4%" align="center"> 2</td>
		<td width ="4%" align="center"> 3</td>
		<td width ="4%" align="center"> 4</td>
		<td width ="4%" align="center"> 5</td>
		<td width ="4%" align="center" > 1</td>
		<td width ="4%" align="center"> 2</td>
		<td width ="4%" align="center"> 3</td>
		<td width ="4%" align="center"> 4</td>
		<td width ="4%" align="center"> 5</td>
		<td width ="4%" align="center" > 1</td>
		<td width ="4%" align="center"> 2</td>
		<td width ="4%" align="center"> 3</td>
		<td width ="4%" align="center"> 4</td>
		<td width ="4%" align="center"> 5</td>
		{% ifequal selectedTerm.number 2 %}
			<td align="center" width ="10%">HK I  </td>
			<td align="center" width ="10%">HK II </td>
			<td align="center" width ="10%"> CK </td>
			
		{% endifequal %}
		
		</tr>
		
{% ifequal selectedTerm currentTerm %}
	{% ifequal selectedTerm.number 1 %} 
		{% for p,m,id in list %}		
		<tr>
			<td align="center">
			 {{forloop.counter}}	
			</td>
			<td>
			 {{p.last_name}}&nbsp {{ p.first_name }} 			
			</td>
			<td>
			{{ p.birthday.day}}/{{ p.birthday.month}}/{{ p.birthday.year}} 
			</td>

			{% ifnotequal m.mieng_1 None%}
			<td>
				<input type="text" name={{id.d1}} id="101" value={{m.mieng_1|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 
				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d1}} value="" style="width:23px ; border:0px" align="center" 
				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}

			

			{% ifnotequal m.mieng_2 None%}
			<td>
				<input type="text" name={{id.d2}} value={{m.mieng_2|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d2}} value="" style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}


			{% ifnotequal m.mieng_3 None%}
			<td>
				<input type="text" name={{id.d3}} value={{m.mieng_3|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d3}} value="" style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}

			{% ifnotequal m.mieng_4 None%}
			<td>
				<input type="text" name={{id.d4}} value={{m.mieng_4|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d4}} value="" style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}

			{% ifnotequal m.mieng_5 None%}
			<td>
				<input type="text" name={{id.d5}} value={{m.mieng_5|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d5}} value="" style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}
			
			{% ifnotequal m.mlam_1 None%}
			<td>
				<input type="text" name={{id.d6}} value={{m.mlam_1|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d6}} value="" style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}
			{% ifnotequal m.mlam_2 None%}
			<td>
				<input type="text" name={{id.d7}} value={{m.mlam_2|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d7}} value="" style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}

			{% ifnotequal m.mlam_3 None%}
			<td>
				<input type="text" name={{id.d8}} value={{m.mlam_3|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
 
				
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d8}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}
			
			{% ifnotequal m.mlam_4 None%}
			<td>
				<input type="text" name={{id.d9}} value={{m.mlam_4|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d9}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}
			
			{% ifnotequal m.mlam_5 None%}
			<td>
				<input type="text" name={{id.d10}} value={{m.mlam_5|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d10}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}

			{% ifnotequal m.mot_tiet_1 None%}
			<td>
				<input type="text" name={{id.d11}} value={{m.mot_tiet_1|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d11}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}
			{% ifnotequal m.mot_tiet_2 None%}
			<td>
				<input type="text" name={{id.d12}} value={{m.mot_tiet_2|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d12}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}
			{% ifnotequal m.mot_tiet_3 None%}
			<td>
				<input type="text" name={{id.d13}} value={{m.mot_tiet_3|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d13}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}
			{% ifnotequal m.mot_tiet_4 None%}
			<td>
				<input type="text" name={{id.d14}} value={{m.mot_tiet_4|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d14}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}
			{% ifnotequal m.mot_tiet_5 None%}
			<td>
				<input type="text" name={{id.d15}} value={{m.mot_tiet_5|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d15}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}

			{% ifnotequal m.ck None%}
			<td>
				<input type="text" name={{id.d16}} value={{m.ck|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d16}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}
			<td align="center"> 
			{{ m.tb|floatformat:"-1"}}
			</td>	

		</tr>	
		
		{% endfor %}
			</table>	
			</div>
			</td>
			</tr>	
			<tr>
			<td> &nbsp </td>
			</tr>
			<tr>
			<td colspan=2 align="right">
			<div id="saveMark" >
			<input type="submit" name="luulai" value="Lưu lại" onclick="javascript:saveMark()" >
			</div>
			</td>
			</tr>
	{% else%}
		{% for p,m,hk1,tbnam,id in list %}		
		<tr>
			<td align="center">
			 {{forloop.counter}}	
			</td>
			<td>
			 {{p.last_name}}&nbsp {{ p.first_name }} 			
			</td>
			<td>
			{{ p.birthday.day}}/{{ p.birthday.month}}/{{ p.birthday.year}} 
			</td>

			{% ifnotequal m.mieng_1 None%}
			<td>
				<input type="text" name={{id.d1}} id="101" value={{m.mieng_1|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 
				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d1}} value="" style="width:23px ; border:0px" align="center" 
				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}

			

			{% ifnotequal m.mieng_2 None%}
			<td>
				<input type="text" name={{id.d2}} value={{m.mieng_2|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d2}} value="" style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}


			{% ifnotequal m.mieng_3 None%}
			<td>
				<input type="text" name={{id.d3}} value={{m.mieng_3|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d3}} value="" style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}

			{% ifnotequal m.mieng_4 None%}
			<td>
				<input type="text" name={{id.d4}} value={{m.mieng_4|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d4}} value="" style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}

			{% ifnotequal m.mieng_5 None%}
			<td>
				<input type="text" name={{id.d5}} value={{m.mieng_5|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d5}} value="" style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}
			
			{% ifnotequal m.mlam_1 None%}
			<td>
				<input type="text" name={{id.d6}} value={{m.mlam_1|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d6}} value="" style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}
			{% ifnotequal m.mlam_2 None%}
			<td>
				<input type="text" name={{id.d7}} value={{m.mlam_2|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d7}} value="" style="width:23px ; border:0px" align="center" 
								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}

			{% ifnotequal m.mlam_3 None%}
			<td>
				<input type="text" name={{id.d8}} value={{m.mlam_3|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 								onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
 
				
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d8}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}
			
			{% ifnotequal m.mlam_4 None%}
			<td>
				<input type="text" name={{id.d9}} value={{m.mlam_4|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d9}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}
			
			{% ifnotequal m.mlam_5 None%}
			<td>
				<input type="text" name={{id.d10}} value={{m.mlam_5|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d10}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}

			{% ifnotequal m.mot_tiet_1 None%}
			<td>
				<input type="text" name={{id.d11}} value={{m.mot_tiet_1|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d11}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}
			{% ifnotequal m.mot_tiet_2 None%}
			<td>
				<input type="text" name={{id.d12}} value={{m.mot_tiet_2|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d12}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}
			{% ifnotequal m.mot_tiet_3 None%}
			<td>
				<input type="text" name={{id.d13}} value={{m.mot_tiet_3|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d13}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}
			{% ifnotequal m.mot_tiet_4 None%}
			<td>
				<input type="text" name={{id.d14}} value={{m.mot_tiet_4|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d14}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}
			{% ifnotequal m.mot_tiet_5 None%}
			<td>
				<input type="text" name={{id.d15}} value={{m.mot_tiet_5|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d15}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}

			{% ifnotequal m.ck None%}
			<td>
				<input type="text" name={{id.d16}} value={{m.ck|floatformat:"-1"}} style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% else %}

			<td>
				<input type="text" name={{id.d16}} value="" style="width:23px ; border:0px" align="center" 				onkeydown="controlDirection(this,event)" onkeyup="acceptDigits(this)">
			</td>
			{% endifnotequal %}

			<td align="center">
				{{hk1|floatformat:"-1"}} 
			</td>

			<td align="center"> 
			{{ m.tb|floatformat:"-1"}}
			</td>	

			<td align="center">
				{{tbnam|floatformat:"-1"}} 
			</td>

			
		</tr>
		
		{% endfor %}			
		</table>	
		</div>
		</td>
		</tr>	
		<tr>
		<td> &nbsp </td>
		</tr>
		<tr>
		<td colspan=2 align="right">
		<div id="saveMark" >
		<input type="submit" name="luulai" value="Lưu lại" onclick="javascript:saveMark()" >
		</div>
		</td>
		</tr>
	{% endifequal %}
		
	{% else %}
	{% ifequal selectedTerm.number 1 %} 
		{% for p,m,id in list %}		
		<tr>
			<td align="center">
			 {{forloop.counter}}	
			</td>
			<td>
			 {{p.last_name}}&nbsp {{ p.first_name }} 			
			</td>
			<td>
			{{ p.birthday.day}}/{{ p.birthday.month}}/{{ p.birthday.year}} 
			</td>

			<td align="center">
				{{m.mieng_1|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mieng_2|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mieng_3|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mieng_4|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mieng_5|floatformat:"-1"}}  
			</td>

			<td align="center">
				{{m.mlam_1|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mlam_2|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mlam_3|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mlam_4|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mlam_5|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_1|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_2|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_3|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_4|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_5|floatformat:"-1"}}  
			</td>

			<td align="center">
				{{m.ck|floatformat:"-1"}}  
			</td>

			<td align="center">
				{{m.tb|floatformat:"-1"}}  
			</td>
		</tr>		
			
		{% endfor %}
		</table>	
		</div>
		</td>
		</tr>
		{%else %}
		{% for p,m,hk1,tbnam,id in list %}		
		<tr>
			<td align="center">
			 {{forloop.counter}}	
			</td>
			<td>
			 {{p.last_name}}&nbsp {{ p.first_name }} 			
			</td>
			<td>
			{{ p.birthday.day}}/{{ p.birthday.month}}/{{ p.birthday.year}} 
			</td>

			<td align="center">
				{{m.mieng_1|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mieng_2|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mieng_3|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mieng_4|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mieng_5|floatformat:"-1"}}  
			</td>

			<td align="center">
				{{m.mlam_1|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mlam_2|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mlam_3|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mlam_4|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mlam_5|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_1|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_2|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_3|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_4|floatformat:"-1"}}  
			</td>
			<td align="center">
				{{m.mot_tiet_5|floatformat:"-1"}}  
			</td>

			<td align="center">
				{{m.ck|floatformat:"-1"}}  
			</td>

			<td align="center">
				{{hk1|floatformat:"-1"}}  
			</td>			
			<td align="center">
				{{m.tb|floatformat:"-1"}}  
			</td>			
			<td align="center">
				{{tbnam|floatformat:"-1"}}  
			</td>			
		</tr>	
			
		 {%endfor %}
		</table>	
		</div>
		</td>
		</tr>
		{% endifequal %}	
	{% endifequal %}
		
	{% endifnotequal %}
	{% endifnotequal %}
</form>	
</table>
{% endblock %}

