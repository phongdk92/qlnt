{% block content %}
    {% if pos > 3 %}
        <script>
         $(document).ready(function() {
                $("select[name=team_id]").each(function() {
                    $(this).change(function() {
                        var id = $(this).parents("tr").attr('class').split(' ')[0];
                        var team = $(this).val();
                        var data = { id: id, team:team, request_type:'team'};
                        var arg = { type:"POST",
                            url:"school/teachers_tab",
                            data: data,
                            datatype:"json",
                            success:function() {
                            }
                        };
                        $.ajax(arg);
                        return false;

                    });
                });

                $("select[name=major]").each(function() {
                    $(this).change(function() {
                        var id = $(this).parents("tr").attr('class').split(' ')[0];
                        var major = $(this).val();
                        var data = { id: id, major:major, request_type:'major'};
                        var arg = { type:"POST",
                            url:"school/teachers_tab",
                            data: data,
                            datatype:"json",
                            success:function() {
                            }
                        };
                        $.ajax(arg);
                        return false;
                    });
                });


                $("#submitform").submit(function() {
                    var d = $(this).serialize();
                    d = d +'&request_type=add';
                    var arg = {data: d,
                        type: $(this).attr('method'),
                        url: $(this).attr('action'),
                        success: function(response) {
                            $('.ui-tabs-panel:visible').html(response);
                            applyListener();
                        }
                    };
                    $.ajax(arg);
                    return false;
                });
         });
        </script>
    {% endif %}
    <h2>Danh sách giáo viên</h2>
        <form action="/school/teachers_tab" id ="submitform" method="post">{% csrf_token %}
            <table class="styleA" width="100%">
                <tr>
                    <th align="center" width="5%"> STT</th>
                    <th align="center" width="15%"><a
                            href="{%url school.views.school_index  %}teachers/1/{{next_status}}"
                            class="tiptiphover" title="Sắp xếp theo tên">Họ tên </a></th>
                    <th align="center" width="10%"><a
                            href="{%url school.views.school_index  %}teachers/2/{{next_status}}"
                            class="tiptiphover" title="Sắp xếp theo ngày sinh">Ngày sinh</a></th>
                    <th align="center" width="20%"> Quê quán</th>
                    <th align="center" width="10%"><a
                            href="{%url school.views.school_index  %}teachers/3/{{next_status}}"
                            class="tiptiphover" title="Sắp xếp giới tính">Giới tính </a></th>
                    <th align="center" width="15%">Chuyên môn</th>
                    <th align="center" width="15%"><a
                            href="{%url school.views.school_index  %}teachers/4/{{next_status}}"
                            class="tiptiphover" title="Sắp xếp theo tổ">Tổ </a></th>
                    {% if pos > 3 %}
                        <th width="10%"></th>
                    {% endif %}
                </tr>

                {% if message != None %}
                    {{ message }}
                {% endif %}

                {% for ss, f in list %}
                    <tr class="{{ss.id}}">
                        <td align="center" width="5%">{{ forloop.counter }}</td>
                        <td align="center" width="15%">
                            {% if pos > 3 or teacher_id == ss.id %}
                                <a href="{%url school.views.school_index  %}viewTeacherDetail/{{ss.id}}">
                            {% endif %}
                            {{ ss.last_name }} {{ ss.first_name }} </a>
                        </td>
                        <td align="center" width="10%"> {{ ss.birthday|date:"SHORT_DATE_FORMAT" }}</td>
                        <td align="center" width="20%"> {{ ss.home_town }}</td>
                        <td align="center" width="10%"> {{ ss.sex }} </td>

                        {% if pos > 3 %}
                            <td align="center" width="15%"> {{ f.major }} </td>
                            <td align="center" width="15%"> {{ f.team_id }} </td>
                            <td align="center" width="10%"><a
                                    href="{%url school.views.school_index  %}deleteTeacher/{{ss.id}}/0"
                                    title="Xóa giáo viên" class="ggButton delete"> xóa </a></td>
                        {% else %}
                            <td align="center" width="15%"> {{ ss.major }} </td>
                            <td align="center" width="15%"> {{ ss.team_id }} </td>
                        {% endif %}
                    </tr>
                {% endfor %}
                {% if pos > 3 %}
                        <tr>
                            {{ form.non_field_errors }}
                            <td width="5%"></td>
                            <td align="center" width="15%">
                                {{ form.first_name.errors }}
                                <p>{{ form.first_name }}</p>
                            </td>

                            <td align="center" width="10%">
                                {{ form.birthday.errors }}
                                <p>{{ form.birthday }}</p>
                            </td>

                            <td align="center" width="20%">
                                {{ form.birth_place.errors }}
                                <p>{{ form.home_town }}</p>
                            </td>


                            <td align="center" width="10%">
                                {{ form.sex.errors }}
                                <p>{{ form.sex }}</p>
                            </td>


                            <td align="center" width="15%">
                                {{ form.major.errors }}
                                <p>{{ form.major }}</p>
                            </td>

                            <td align="center" width="15%">
                                {{ form.team_id.errors }}
                                <p>{{ form.team_id }}</p>
                            </td>

                            <td><input type="submit" class="ggButton" value="Thêm"/></td>
                        </tr>
                {% endif %}
            </table>
            </form>

            {% if pos > 3 %}
                <tr>
                    <td width="5%" align="left">&nbsp</td>
                </tr>
            {% endif %}
{% endblock %}